<% packages_bucket=`terraform output packages_bucket`.strip
 droplets_bucket=`terraform output droplets_bucket`.strip
 resources_bucket=`terraform output resources_bucket`.strip
 buildpacks_bucket=`terraform output buildpacks_bucket`.strip
 %>
{
  ".cloud_controller.system_domain": {
    "value": "sys.<%= ENV.fetch('DOMAIN') %>"
  },
  ".cloud_controller.apps_domain": {
    "value": "apps.<%= ENV.fetch('DOMAIN') %>"
  },
  ".ha_proxy.skip_cert_verify": {
    "value": true
  },
  ".properties.networking_point_of_entry": {
    "value": "external_ssl"
  },
  <%- if Gem::Version.new(ENV.fetch('ERT_VERSION')) > Gem::Version.new('1.11.9999') -%>
  ".properties.haproxy_forward_tls": {
    "value": "disable"
  },
  ".properties.gorouter_ssl_ciphers": {
    "value": "ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384"
  },
  ".properties.haproxy_ssl_ciphers": {
    "value": "DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384"
  },
  ".properties.networking_poe_ssl_cert": {
  <%- else -%>
  ".properties.networking_point_of_entry.external_ssl.ssl_rsa_certificate": {
  <%- end -%>
    "value": {
      "cert_pem": <%= ENV.fetch('DOMAIN_CRT').dump %>,
      "private_key_pem": <%= ENV.fetch('DOMAIN_KEY').dump %>
    }
  },
  ".properties.security_acknowledgement": {
    "value": "X"
  },
  ".properties.system_blobstore": {
    "value": "internal"
  },
  ".properties.tcp_routing": {
    "value": "enable"
  },
  ".properties.tcp_routing.enable.reservable_ports": {
    "value": "1024-1123"
  },
  ".mysql_monitor.recipient_email": {
    "value": "test@example.com"
  },
  ".uaa.service_provider_key_credentials": {
    "value": {
      "cert_pem": <%= ENV.fetch('DOMAIN_CRT').dump %>,
      "private_key_pem": <%= ENV.fetch('DOMAIN_KEY').dump %>
    }
  }
}
