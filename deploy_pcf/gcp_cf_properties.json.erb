<% packages_bucket=`terraform output packages_bucket` -%>
<% droplets_bucket=`terraform output droplets_bucket` -%>
<% resources_bucket=`terraform output resources_bucket` -%>
<% buildpacks_bucket=`terraform output buildpacks_bucket` -%>
{
  ".cloud_controller.system_domain": {
    "value": "sys.<%= ENV.fetch('DOMAIN') %>"
  },
  ".cloud_controller.apps_domain": {
    "value": "apps.<%= ENV.fetch('DOMAIN') %>"
  },
  ".ha_proxy.skip_cert_verify": {
    "value": true
  },
  ".properties.networking_point_of_entry": {
    "value": "external_ssl"
  },
  ".properties.networking_point_of_entry.external_ssl.ssl_rsa_certificate": {
    "value": {
      "cert_pem": "$(awk '$1=$1' ORS='\\n' $ENV_DIR/$ENV-certificate.pem)",
      "private_key_pem": "$(awk '$1=$1' ORS='\\n' $ENV_DIR/$ENV-certificate-private-key.pem)"
    }
  },
  ".properties.security_acknowledgement": {
    "value": "X"
  },
  ".properties.system_blobstore": {
    "value": "external_gcs"
  },
  ".properties.system_blobstore.external_gcs.packages_bucket": {
    "value": "<%= packages_bucket %>"
  },
  ".properties.system_blobstore.external_gcs.droplets_bucket": {
    "value": "<%= droplets_bucket %>"
  },
  ".properties.system_blobstore.external_gcs.resources_bucket": {
    "value": "<%= resources_bucket %>"
  },
  ".properties.system_blobstore.external_gcs.buildpacks_bucket": {
    "value": "<%= buildpacks_bucket %>"
  },
  ".properties.system_blobstore.external_gcs.access_key": {
    "value": $(jq .access_key ../storage.key.json)
  },
  ".properties.system_blobstore.external_gcs.secret_key": {
    "value": {
      "secret": $(jq .secret_key ../storage.key.json)
    }
  },
  ".properties.tcp_routing": {
    "value": "enable"
  },
  ".properties.tcp_routing.enable.reservable_ports": {
    "value": "1024-1123"
  },
  ".mysql_monitor.recipient_email": {
    "value": "test@example.com"
  }
}